<%inherit file="layout.tmpl.html"/>

<%namespace import="display_threaded_comments" file="comment.tmpl.html"/>
<%namespace import="comment_form" file="comment_form.tmpl.html"/>

<%def name="title()">${page.title} - good coders code, great reuse</%def>

<div class="page">
  <div class="header">
    <span class="category"><a href="/category/TODO">Programming</a></span>
    <span class="next comments"><a href="${page_path}/comments"><strong>20</strong> Comments</a></span>
    <span class="date right"><!--${page.created}--><a href="sunday">Sundary</a>, <a href="june-2009">June 15</a>, <a href="2009">2009</a></span>
    <div class="clear"></div>
    <div class="hr"></div>
    <h1><a href="${page_path}">${page.title}</a></h1>
    <div class="hr lighter"></div>
  </div>
  <div class="content">
    ${page.parsed_content}
  </div>
  <div class="footer">
    <div class="hr"></div>
    here be the article footer info
  </div>

  % if display_comments:
  <div class="comments">
    <div class="hr"></div>
    <div id="comment_list">
      <h3>Comments</h3>
      % if comments['root']:
        ${display_threaded_comments(comments['root'], comments)}
        <script>
          catonmat.init_comments('page', '');
        </script>
      % else:
        <p class="nocomm">There are currently no comments! Be <b>the first</b> to comment!</p>
      % endif
    </div>

    <div class="add">
      <h3>Leave a new comment</h3>
      ${comment_form(page.page_id, comment_submit_path, form,
                     comment_error=comment_error, comment_preview=comment_preview)}
      <script>
        catonmat.init_why_email();
        catonmat.init_preview_comment();
        catonmat.init_submit_comment('');
      </script>
    </div>
  </div>
  % endif

</div>

